<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Th√™m / S·ª≠a D·ªãch v·ª• - Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { display: flex; }
        #main-content { margin-left: 260px; padding: 2rem; flex-grow: 1; background-color: #f8f9fa; min-height: 100vh; }
        #sidebar {
            width: 260px; height: 100vh; position: fixed;
            background-color: #343a40; color: white; padding: 1rem;
        }
        #sidebar a { color: white; text-decoration: none; display: block; padding: 8px 10px; border-radius: 5px; }
        #sidebar a:hover, #sidebar .active { background-color: #495057; }
        .current-img {
            max-width: 120px;
            height: auto;
            border-radius: 8px;
        }
    </style>
</head>
<body>
<div th:replace="fragments/sidebar :: sidebar(4)"></div>
<div id="main-content">
    <div class="card mt-4 shadow-sm">
        <div class="card-body">
            <h4 class="card-title mb-4">‚úèÔ∏è <span th:text="${isEdit} ? 'Ch·ªânh s·ª≠a' : 'Th√™m m·ªõi'"></span> D·ªãch v·ª•</h4>
            <form th:action="@{${isEdit} ? '/admin/services/edit/' + ${service.id} : '/admin/services/new'}"
                  method="post" enctype="multipart/form-data" th:object="${service}">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="name" class="form-label">T√™n d·ªãch v·ª• <span class="text-danger">*</span></label>
                        <input type="text" th:field="*{name}" class="form-control" id="name" placeholder="V√≠ d·ª•: U·ªën t√≥c layer" required>
                    </div>
                    <div class="col-md-6">
                        <label for="price" class="form-label">Gi√° d·ªãch v·ª• (‚Ç´) <span class="text-danger">*</span></label>
                        <input type="number" th:field="*{price}" class="form-control" id="price" min="0" step="1000" placeholder="V√≠ d·ª•: 250000" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="intro" class="form-label">Gi·ªõi thi·ªáu ng·∫Øn</label>
                    <input type="text" th:field="*{intro}" class="form-control" id="intro" placeholder="V√≠ d·ª•: U·ªën nh·∫π nh√†ng, t·ª± nhi√™n...">
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">M√¥ t·∫£ chi ti·∫øt</label>
                    <textarea th:field="*{description}" class="form-control" id="description" rows="4" placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ d·ªãch v·ª•..."></textarea>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="duration" class="form-label">Th·ªùi gian th·ª±c hi·ªán (ph√∫t) <span class="text-danger">*</span></label>
                        <input type="number" th:field="*{duration}" class="form-control" id="duration" min="1" placeholder="V√≠ d·ª•: 45" required>
                    </div>
                    <div class="col-md-6">
                        <label for="status" class="form-label">Tr·∫°ng th√°i</label>
                        <select th:field="*{status}" class="form-select" id="status">
                            <option value="ACTIVE">ACTIVE</option>
                            <option value="INACTIVE">INACTIVE</option>
                        </select>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="imageFile" class="form-label">H√¨nh ·∫£nh ƒë·∫°i di·ªán</label>
                    <input class="form-control" type="file" id="imageFile" name="imageFile" accept="image/*">
                    <div th:if="${isEdit} and ${service.image}" class="mt-2">
                        <span class="text-muted">·∫¢nh hi·ªán t·∫°i:</span>
                        <div class="mt-1">
                            <img th:src="@{/uploads/services/{img}(img=${service.image})}" 
                                 class="current-img" 
                                 onerror="this.src='https://placehold.co/120x120?text=No+Image'"
                                 th:alt="${service.name}">
                        </div>
                    </div>
                </div>

                <div class="text-end">
                    <button type="submit" class="btn btn-success">üíæ L∆∞u d·ªãch v·ª•</button>
                    <a th:href="@{/admin/services}" class="btn btn-secondary">‚¨Ö Quay l·∫°i</a>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>